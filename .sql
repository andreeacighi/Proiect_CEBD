--------------------------------------------------------
--  File created - Saturday-February-01-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table CONSULTATII
--------------------------------------------------------

  CREATE TABLE "CEBD_PROIECT"."CONSULTATII" 
   (	"ID_CONSULTATIE" NUMBER(4,0), 
	"DIAGNOSTIC" VARCHAR2(255 BYTE), 
	"SPITALIZARE" VARCHAR2(2 BYTE), 
	"RETETA" VARCHAR2(255 BYTE), 
	"ID_PROGRAMARE" NUMBER(4,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table MEDICI
--------------------------------------------------------

  CREATE TABLE "CEBD_PROIECT"."MEDICI" 
   (	"ID_MEDIC" NUMBER(4,0), 
	"NUME" VARCHAR2(20 BYTE), 
	"PRENUME" VARCHAR2(20 BYTE), 
	"TELEFON" VARCHAR2(10 BYTE), 
	"PARAFA_MEDIC" VARCHAR2(20 BYTE), 
	"SPECIALIZARI_ID" NUMBER(4,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table PACIENTI
--------------------------------------------------------

  CREATE TABLE "CEBD_PROIECT"."PACIENTI" 
   (	"ID_PACIENT" NUMBER(4,0), 
	"NUME" VARCHAR2(20 BYTE), 
	"PRENUME" VARCHAR2(20 BYTE), 
	"CNP" VARCHAR2(14 BYTE), 
	"ASIGURARE" VARCHAR2(2 BYTE), 
	"CARD_SANATATE" VARCHAR2(20 BYTE), 
	"ADRESA" VARCHAR2(50 BYTE), 
	"TELEFON" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table PROGRAMARI
--------------------------------------------------------

  CREATE TABLE "CEBD_PROIECT"."PROGRAMARI" 
   (	"ID_PROGRAMARE" NUMBER(4,0), 
	"DATA" DATE, 
	"ORA" VARCHAR2(5 BYTE), 
	"STATUS_PROGRAMARE" VARCHAR2(20 BYTE), 
	"ID_MEDIC" NUMBER(4,0), 
	"ID_PACIENT" NUMBER(4,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table SPECIALIZARI
--------------------------------------------------------

  CREATE TABLE "CEBD_PROIECT"."SPECIALIZARI" 
   (	"ID_SPECIALIZARE" NUMBER(4,0), 
	"DENUMIRE" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into CEBD_PROIECT.CONSULTATII
SET DEFINE OFF;
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (1,'Grip? viral?','Nu','Paracetamol',1001);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (2,'Infec?ie respiratorie','Da','Antibiotic X',1002);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (3,'Diabet tip 2','Nu','Metformin',1003);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (4,'Hipertensiune arterial?','Da','Inhibitor ACE',1004);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (5,'Alergie sezonier?','Nu','Antihistaminic',1005);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (6,'Bron?it?','Da','Antibiotic Y',1006);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (7,'Artrit? reumatoid?','Da','Corticosteroid',1007);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (8,'R?ceal?','Nu','Vitamine C ?i paracetamol',1008);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (9,'Insuficien?? renal?','Da','Diuretice',1009);
Insert into CEBD_PROIECT.CONSULTATII (ID_CONSULTATIE,DIAGNOSTIC,SPITALIZARE,RETETA,ID_PROGRAMARE) values (10,'Hernie de disc','Nu','Analgezic',1006);
REM INSERTING into CEBD_PROIECT.MEDICI
SET DEFINE OFF;
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (1,'Moldovan','Alin','0754851236','P1234',1);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (2,'C?lin','Diana','0743234567','P5678',2);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (3,'Rusu','Mihai','0734345678','P9101',3);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (4,'Olteanu','Ioana','0755456789','P1213',4);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (5,'Tudor','R?zvan','0766567890','P1415',5);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (6,'Lungu','Ana','0711678901','P1617',6);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (7,'Sima','Bogdan','0722789012','P1819',7);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (8,'Iacob','Cristina','0733890123','P2021',8);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (9,'Neagu','Gabriel','0744901234','P2223',9);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (10,'Marin','Oana','0755012345','P2425',10);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (11,'Talpos','Daria','0754878956','P1458',1);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (12,'Bob','Ionela','0745865423','P1012',2);
Insert into CEBD_PROIECT.MEDICI (ID_MEDIC,NUME,PRENUME,TELEFON,PARAFA_MEDIC,SPECIALIZARI_ID) values (13,'Ciaca','Iulia','0745854215','P4512',10);
REM INSERTING into CEBD_PROIECT.PACIENTI
SET DEFINE OFF;
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (1,'Popescu','Andrei','1970523123456','Da','123456789012345','Str. Libert??ii 10, Cluj-Napoca','0722123456');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (2,'Ionescu','Maria','2930705123457','Nu','234567890123456','Str. Eminescu 15, Bucure?ti','0743234567');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (3,'Vasilescu','Mihai','1850829123458','Da','345678901234567','Str. Lalelelor 3, Bra?ov','0734345678');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (4,'Gheorghe','Elena','2810101123459','Nu','456789012345678','Str. Unirii 22, Ia?i','0755456789');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (5,'Dumitru','Ioana','2900223123460','Da','567890123456789','Str. Prim?verii 7, Constan?a','0766567890');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (6,'Stoica','Cristian','1930512123461','Da','678901234567890','Str. Carpa?ilor 12, Sibiu','0711678901');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (7,'Radu','Anca','2860608123462','Nu','789012345678901','Str. Tineretului 8, Oradea','0722789012');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (8,'Iliescu','George','1891209123463','Da','890123456789012','Str. Vasile Alecsandri 5, Gala?i','0733890123');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (9,'Ciobanu','Florina','2920407123464','Da','901234567890123','Str. ?tefan cel Mare 18, Timi?oara','0744901234');
Insert into CEBD_PROIECT.PACIENTI (ID_PACIENT,NUME,PRENUME,CNP,ASIGURARE,CARD_SANATATE,ADRESA,TELEFON) values (10,'Munteanu','Adrian','1830312123465','Nu','012345678901234','Str. P?cii 9, Craiova','0755012345');
REM INSERTING into CEBD_PROIECT.PROGRAMARI
SET DEFINE OFF;
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1001,to_date('11-JUN-25','DD-MON-RR'),'10:00','Confirmat?',1,1);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1002,to_date('16-DEC-24','DD-MON-RR'),'14:30','Anulat?',2,3);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1003,to_date('17-DEC-24','DD-MON-RR'),'09:15','Confirmat?',3,5);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1004,to_date('18-DEC-24','DD-MON-RR'),'11:00','Finalizat?',4,7);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1005,to_date('19-DEC-24','DD-MON-RR'),'16:00','Confirmat?',1,1);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1006,to_date('20-DEC-24','DD-MON-RR'),'08:45','Finalizat?',6,4);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1007,to_date('21-DEC-24','DD-MON-RR'),'13:00','Anulat?',7,3);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1008,to_date('22-DEC-24','DD-MON-RR'),'15:30','Confirmat?',1,1);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1009,to_date('23-DEC-24','DD-MON-RR'),'10:30','Finalizat?',9,9);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1010,to_date('24-DEC-24','DD-MON-RR'),'12:45','Confirmat?',10,10);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1011,to_date('12-JUN-25','DD-MON-RR'),'14:00','Confirmata',1,1);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1012,to_date('12-JUN-25','DD-MON-RR'),'15:00','Confirmata',9,8);
Insert into CEBD_PROIECT.PROGRAMARI (ID_PROGRAMARE,DATA,ORA,STATUS_PROGRAMARE,ID_MEDIC,ID_PACIENT) values (1013,to_date('12-DEC-25','DD-MON-RR'),'16:00','Confirmata',4,3);
REM INSERTING into CEBD_PROIECT.SPECIALIZARI
SET DEFINE OFF;
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (1,'Cardiologie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (2,'Chirurgie General?');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (3,'Pediatrie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (4,'Dermatologie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (5,'Neurologie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (6,'Ortopedie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (7,'Oncologie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (8,'Oftalmologie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (9,'Psihiatrie');
Insert into CEBD_PROIECT.SPECIALIZARI (ID_SPECIALIZARE,DENUMIRE) values (10,'Ginecologie si Obstetrica');
--------------------------------------------------------
--  DDL for Index MEDICI_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "CEBD_PROIECT"."MEDICI_PK" ON "CEBD_PROIECT"."MEDICI" ("ID_MEDIC") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index SPECIALIZARI_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "CEBD_PROIECT"."SPECIALIZARI_PK" ON "CEBD_PROIECT"."SPECIALIZARI" ("ID_SPECIALIZARE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index CONSULTATII_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "CEBD_PROIECT"."CONSULTATII_PK" ON "CEBD_PROIECT"."CONSULTATII" ("ID_CONSULTATIE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index PACIENTI_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "CEBD_PROIECT"."PACIENTI_PK" ON "CEBD_PROIECT"."PACIENTI" ("ID_PACIENT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index PROGRAMARI_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "CEBD_PROIECT"."PROGRAMARI_PK" ON "CEBD_PROIECT"."PROGRAMARI" ("ID_PROGRAMARE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Procedure INSERT_PROGRAMARE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "CEBD_PROIECT"."INSERT_PROGRAMARE" 
(
  ID IN NUMBER,
  DATA IN DATE,
  ORA IN VARCHAR2,
  STATUS IN VARCHAR2,
  ID_MEDIC IN NUMBER,
  ID_PACIENT IN NUMBER
) AS 
BEGIN
  INSERT INTO programari VALUES (ID,data,ora,status,id_medic,id_pacient);
  COMMIT;
END INSERT_PROGRAMARE;

/
--------------------------------------------------------
--  DDL for Function GETAPPOINTMENTCOUNT
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "CEBD_PROIECT"."GETAPPOINTMENTCOUNT" (
    p_MedicID IN NUMBER
) RETURN NUMBER 
IS 
    v_total_appointments NUMBER := 0;
BEGIN
    SELECT COUNT(*) INTO v_total_appointments 
    FROM programari 
    WHERE programari.id_medic = p_medicid;

    RETURN v_total_appointments;
END GetAppointmentCount;

/
--------------------------------------------------------
--  DDL for Function GETFUTUREAPPOINTMENTS
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "CEBD_PROIECT"."GETFUTUREAPPOINTMENTS" (
    MedicID IN NUMBER
) RETURN SYS_REFCURSOR 
AS 
    result_cursor SYS_REFCURSOR;
BEGIN
    OPEN result_cursor FOR 
    SELECT programari.id_programare, programari.data, programari.ora, pacienti.nume AS Pacient, pacienti.prenume AS PacientPrenume
    FROM programari JOIN pacienti  ON programari.idPacient = pacienti.id_pacient
    WHERE programari.id_medic = MedicID
    AND programari.data >= SYSDATE; -- Oracle folose?te SYSDATE în loc de GETDATE()

    RETURN result_cursor;
END;

/
--------------------------------------------------------
--  DDL for Function NR_CONSULTATII
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "CEBD_PROIECT"."NR_CONSULTATII" 
(
  CONSULTATII IN VARCHAR2
) RETURN NUMBER 
AS
total NUMBER := 0; 
sql_sintaxa VARCHAR(100);
BEGIN
sql_sintaxa:= 'SELECT COUNT (*) FROM ' || CONSULTATII;
EXECUTE IMMEDIATE sql_sintaxa INTO total;
  RETURN total;
END NR_CONSULTATII;

/
--------------------------------------------------------
--  Constraints for Table CONSULTATII
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" ADD CONSTRAINT "CONSULTATII_PK" PRIMARY KEY ("ID_CONSULTATIE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" MODIFY ("ID_PROGRAMARE" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" MODIFY ("RETETA" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" MODIFY ("SPITALIZARE" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" MODIFY ("DIAGNOSTIC" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" MODIFY ("ID_CONSULTATIE" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table MEDICI
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."MEDICI" ADD CONSTRAINT "MEDICI_PK" PRIMARY KEY ("ID_MEDIC")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "CEBD_PROIECT"."MEDICI" MODIFY ("SPECIALIZARI_ID" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."MEDICI" MODIFY ("PARAFA_MEDIC" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."MEDICI" MODIFY ("TELEFON" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."MEDICI" MODIFY ("PRENUME" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."MEDICI" MODIFY ("NUME" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."MEDICI" MODIFY ("ID_MEDIC" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SPECIALIZARI
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."SPECIALIZARI" ADD CONSTRAINT "SPECIALIZARI_PK" PRIMARY KEY ("ID_SPECIALIZARE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "CEBD_PROIECT"."SPECIALIZARI" MODIFY ("DENUMIRE" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."SPECIALIZARI" MODIFY ("ID_SPECIALIZARE" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PROGRAMARI
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" ADD CONSTRAINT "PROGRAMARI_PK" PRIMARY KEY ("ID_PROGRAMARE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" MODIFY ("ID_PACIENT" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" MODIFY ("ID_MEDIC" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" MODIFY ("STATUS_PROGRAMARE" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" MODIFY ("ORA" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" MODIFY ("DATA" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" MODIFY ("ID_PROGRAMARE" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PACIENTI
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."PACIENTI" ADD CONSTRAINT "PACIENTI_PK" PRIMARY KEY ("ID_PACIENT")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("TELEFON" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("ADRESA" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("ASIGURARE" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("CNP" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("PRENUME" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("NUME" NOT NULL ENABLE);
  ALTER TABLE "CEBD_PROIECT"."PACIENTI" MODIFY ("ID_PACIENT" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table CONSULTATII
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."CONSULTATII" ADD CONSTRAINT "CONSULTATII_FK1" FOREIGN KEY ("ID_PROGRAMARE")
	  REFERENCES "CEBD_PROIECT"."PROGRAMARI" ("ID_PROGRAMARE") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table MEDICI
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."MEDICI" ADD CONSTRAINT "MEDICI_FK1" FOREIGN KEY ("SPECIALIZARI_ID")
	  REFERENCES "CEBD_PROIECT"."SPECIALIZARI" ("ID_SPECIALIZARE") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PROGRAMARI
--------------------------------------------------------

  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" ADD CONSTRAINT "PROGRAMARI_FK1" FOREIGN KEY ("ID_MEDIC")
	  REFERENCES "CEBD_PROIECT"."MEDICI" ("ID_MEDIC") ENABLE;
  ALTER TABLE "CEBD_PROIECT"."PROGRAMARI" ADD CONSTRAINT "PROGRAMARI_FK2" FOREIGN KEY ("ID_PACIENT")
	  REFERENCES "CEBD_PROIECT"."PACIENTI" ("ID_PACIENT") ENABLE;
